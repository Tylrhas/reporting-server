<% include ../partials/header.ejs %>

<% include ../partials/nav.ejs %>
    <div class="loginmodal-container">
            <div id="alerts"></div>
        <h1>Add A User</h1>
        <br>
        <form id="signup" name="signup" method="post" action="/signup">
            <label for="email">Email Address</label>
            <input class="text" name="email" type="email" />
            <label for="firstname">Firstname</label>
            <input name="firstname" type="text" />
            <label for="lastname">Lastname</label>
            <input name="lastname" type="text" />
            <label for="password">Password</label>
            <input name="password" type="password" />
            <input class="btn" type="submit" value="Add User" />
        </form>
    </div>
    <script>
        // process the form
    $('#signup').submit(function(event) {

// get the form data
// there are many ways to get this data using jQuery (you can use the class or id also)
var formData = {
    'firstname'             : $('input[name=firstname]').val(),
    'lastname'              : $('input[name=lastname]').val(),
    'email'             : $('input[name=email]').val(),
    'password'          : $('input[name=password]').val()
};

// process the form
$.ajax({
    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
    url         : '/signup', // the url where we want to POST
    data        : formData, // our data object
    dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
})
    // using the done promise callback
    .done(function(data) {
        
        $('#alerts').append(
        '<div class="alert alert-success fade in">' +
            '<button type="button" class="close" data-dismiss="alert">' +
            '&times;</button>' + data.message + '</div>');
        // log data to the console so we can see
        console.log(data); 


        // here we will handle errors and validation messages
    });

// stop the form from submitting the normal way and refreshing the page
event.preventDefault();
});
    </script>
    <% include ../partials/footer.ejs %>